{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\UWE\\\\FYP\\\\AutoBudgetApplication\\\\pages\\\\Common\\\\CameraComponent.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport dva, { connect } from 'dva';\nimport { Camera } from 'expo-camera';\nimport * as Permissions from 'expo-permissions';\nimport * as ImagePicker from 'expo-image-picker';\nimport CameraFunction from \"./CameraFunction\";\n\nvar CameraComponent = function (_React$PureComponent) {\n  _inherits(CameraComponent, _React$PureComponent);\n\n  var _super = _createSuper(CameraComponent);\n\n  function CameraComponent() {\n    var _this;\n\n    _classCallCheck(this, CameraComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      hasPermission: null,\n      cameraType: Camera.Constants.Type.back\n    };\n\n    _this.useEffect = function () {\n      (function _callee() {\n        var _await$Camera$request, status;\n\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n              case 2:\n                _await$Camera$request = _context.sent;\n                status = _await$Camera$request.status;\n                setHasPermission(status === 'granted');\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      })();\n    };\n\n    _this.getPermissionAsync = function _callee2() {\n      var _await$Permissions$as, _status, _await$Permissions$as2, status;\n\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(Platform.OS === 'ios')) {\n                _context2.next = 6;\n                break;\n              }\n\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n            case 3:\n              _await$Permissions$as = _context2.sent;\n              _status = _await$Permissions$as.status;\n\n              if (_status !== 'granted') {\n                alert('Sorry, we need camera roll permissions to make this work!');\n              }\n\n            case 6:\n              _context2.next = 8;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 8:\n              _await$Permissions$as2 = _context2.sent;\n              status = _await$Permissions$as2.status;\n\n              _this.setState({\n                hasPermission: status === 'granted'\n              });\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.handleCameraType = function () {\n      var cameraType = _this.state.cameraType;\n\n      _this.setState({\n        cameraType: cameraType === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back\n      });\n    };\n\n    _this.takePicture = function _callee3() {\n      var photo;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!_this.camera) {\n                _context3.next = 4;\n                break;\n              }\n\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(_this.camera.current.takePictureAsync());\n\n            case 3:\n              photo = _context3.sent;\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.pickImage = function _callee4() {\n      var result;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.Images\n              }));\n\n            case 2:\n              result = _context4.sent;\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(CameraComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getPermissionAsync();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          dispatch = _this$props.dispatch,\n          effects = _this$props.effects;\n      var hasPermission = this.state.hasPermission;\n      return React.createElement(React.Fragment, null, React.createElement(CameraFunction, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return CameraComponent;\n}(React.PureComponent);\n\nexport default connect(function (state) {\n  return {\n    loading: state.loading,\n    effects: state.loading.effects\n  };\n})(CameraComponent);","map":{"version":3,"sources":["D:/UWE/FYP/AutoBudgetApplication/pages/Common/CameraComponent.js"],"names":["React","dva","connect","Camera","Permissions","ImagePicker","CameraFunction","CameraComponent","state","hasPermission","cameraType","Constants","Type","back","useEffect","requestPermissionsAsync","status","setHasPermission","getPermissionAsync","Platform","OS","askAsync","CAMERA_ROLL","alert","CAMERA","setState","handleCameraType","front","takePicture","camera","current","takePictureAsync","photo","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","result","props","dispatch","effects","PureComponent","loading"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n  Platform,\r\n} from 'react-native';\r\nimport dva, { connect } from 'dva';\r\nimport { Camera } from 'expo-camera';\r\nimport * as Permissions from 'expo-permissions';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport CameraFunction from './CameraFunction';\r\nclass CameraComponent extends React.PureComponent {\r\n  state = {\r\n    hasPermission: null,\r\n    cameraType: Camera.Constants.Type.back,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPermissionAsync()\r\n  }\r\n\r\n  useEffect = () => {\r\n    (async () => {\r\n      const { status } = await Camera.requestPermissionsAsync();\r\n      setHasPermission(status === 'granted');\r\n    })();\r\n  }\r\n\r\n\r\n  getPermissionAsync = async () => {\r\n    // Camera roll Permission \r\n    if (Platform.OS === 'ios') {\r\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n      if (status !== 'granted') {\r\n        alert('Sorry, we need camera roll permissions to make this work!');\r\n      }\r\n    }\r\n    // Camera Permission\r\n    const { status } = await Permissions.askAsync(Permissions.CAMERA);\r\n    this.setState({ hasPermission: status === 'granted' });\r\n  }\r\n\r\n  handleCameraType = () => {\r\n    const { cameraType } = this.state\r\n\r\n    this.setState({\r\n      cameraType:\r\n        cameraType === Camera.Constants.Type.back\r\n          ? Camera.Constants.Type.front\r\n          : Camera.Constants.Type.back\r\n    })\r\n  }\r\n\r\n  takePicture = async () => {\r\n    if (this.camera) {\r\n      let photo = await this.camera.current.takePictureAsync();\r\n    }\r\n  }\r\n\r\n  pickImage = async () => {\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n    });\r\n  }\r\n  // Local path to file on the device\r\n  render() {\r\n    const { dispatch, effects } = this.props;\r\n    const { hasPermission } = this.state;\r\n    return (\r\n      // <>\r\n      //   {hasPermission === null ? <View /> : (\r\n      //     hasPermission === false ? <Text>No access to camera</Text> :\r\n      //       <View style={{ flex: 1 }}>\r\n      //         <Camera style={{ flex: 1 }} type={this.state.cameraType}\r\n      //           ref={ref => {\r\n      //             this.camera = ref;\r\n      //           }}>\r\n      //           <View style={{ flex: 1, flexDirection: \"row\", justifyContent: \"space-between\", margin: 20 }}>\r\n      //             <TouchableOpacity\r\n      //               style={{\r\n      //                 alignSelf: 'flex-end',\r\n      //                 alignItems: 'center',\r\n      //                 backgroundColor: 'transparent',\r\n      //               }}>\r\n      //               <Ionicons\r\n      //                 name=\"ios-photos\"\r\n      //                 style={{ color: \"#fff\", fontSize: 40 }}\r\n      //               />\r\n      //             </TouchableOpacity>\r\n      //             <TouchableOpacity\r\n      //               style={{\r\n      //                 alignSelf: 'flex-end',\r\n      //                 alignItems: 'center',\r\n      //                 backgroundColor: 'transparent',\r\n      //               }}\r\n      //               onPress={() => this.takePicture()}>\r\n      //               <FontAwesome\r\n      //                 name=\"camera\"\r\n      //                 style={{ color: \"#fff\", fontSize: 40 }}\r\n      //               />\r\n      //             </TouchableOpacity>\r\n      //             <TouchableOpacity\r\n      //               style={{\r\n      //                 alignSelf: 'flex-end',\r\n      //                 alignItems: 'center',\r\n      //                 backgroundColor: 'transparent',\r\n      //               }}\r\n      //               onPress={() => this.handleCameraType()}>\r\n      //               <MaterialCommunityIcons\r\n      //                 name=\"camera-party-mode\"\r\n      //                 style={{ color: \"#fff\", fontSize: 40 }}\r\n      //               />\r\n      //             </TouchableOpacity>\r\n      //           </View>\r\n      //         </Camera>\r\n      //       </View>\r\n      //   )}\r\n      //   <TouchableOpacity\r\n      //     style={{\r\n      //       alignSelf: 'flex-end',\r\n      //       alignItems: 'center',\r\n      //       backgroundColor: 'transparent',\r\n      //     }}\r\n      //     onPress={() => this.handleCameraType()}\r\n      //   >\r\n      //     <MaterialCommunityIcons\r\n      //       name=\"camera-party-mode\"\r\n      //       style={{ color: \"#fff\", fontSize: 40 }}\r\n      //     />\r\n      //   </TouchableOpacity>\r\n      // </>\r\n      <>\r\n        <CameraFunction />\r\n      </>\r\n    )\r\n  }\r\n}\r\nexport default connect(state => ({\r\n  loading: state.loading,\r\n  effects: state.loading.effects\r\n}))(CameraComponent);"]},"metadata":{},"sourceType":"module"}